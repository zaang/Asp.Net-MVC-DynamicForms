企业OA项目启动计划
==================
首先说明一点，这个名字是一个非正式的名称，我不知道这个项目具体叫什么。
名不正则言不顺，一个好名字就是一个最好的起点。

先谈谈我的困惑

1. 项目要做什么还不是很清楚
2. 目标用户还活在我们的思想里，而不是具体的人。
3. 功能要求比较宽泛，没有具体的模型支持
4. 一次只要一个创新点就好，多了会消化不良。这个创新要怎么看，首先要放到业界整体来看，首先要达到业界可接纳的水平，很多东西都有现成的范例，我们可以很方便的评估这些方式是不是我们想要的东西。
5. 没有甲方的项目最难做，只好做你心目中觉得最应该做的事情
6. 必须有一个甲方代表，专业点的名字叫 **产品经理**


##Web框架必须有的服务##
1. IoC 控制反转，就是高层应用决定底层实现。
 比较好理解的例子比如数据库连接对象我们只用 *System.Data.Common.DbConnection* 抽象类，具体使用哪种数据库在开发业务逻辑的时候不去管他，直到部署时在配置IoC容器使用哪个具体的对象，在不修改代码的情况下，可以连接 ODBC数据源、OleDB、SqlServer等等。
再高一点，我们要不要用数据库都不去管，只定义好数据访问接口，使得系统可以支持多种持久化方案。
IoC 容器和对象工厂（Object Factory）的关系，最早在Java中看到对象工厂我还很奇怪，为什么要用一个类来实现一个静态方法要做的事情，后来明白了，在Web容器中，对象工厂可以通过配置文件指定具体实现的方式和初始化参数等。IoC容器连这个对象工厂也省掉了，通过属性反射等手段自己去查找需要实例化的对象。
IoC 方式很好的解决了多态的矛盾，即我们无法直接新建一个未知的继承对象，因为在写这个对象创建方法时哪个继承的类可能还不存在，间接创建对象比较繁琐，这种繁琐的工作就交给IoC工具去做吧。
除了典型的数据访问功能需要用IoC来处理以外，业务逻辑中运行时加载的逻辑对象也可以这样由IoC来完成。

2. AOP 面向服务

>AOP（Aspect Orient Programming），也就是面向方面编程，作为面向对象编程的一种补充，专门用于处理系统中分布于各个模块（不同方法）中的交叉关注点的问题，在 Java EE 应用中，常常通过 AOP 来处理一些具有横切性质的系统级服务，如事务管理、安全检查、缓存、对象池管理等。AOP 实现的关键就在于 AOP 框架自动创建的 AOP 代理，AOP 代理主要分为静态代理和动态代理两大类，静态代理以 AspectJ 为代表；而动态代理则以 Spring AOP 为代表。我们知道，OOP引进"抽象"、"封装"、"继承"、"多态"等概念,对万事万物进行抽象和封装，来建立一种对象的层次结构，它强调了一种完整事物的自上而下的关系。但是具体细粒度到每个事物内部的情况，OOP就显得无能为力了。比如日志功能。日志代码往往水平地散布在所有对象层次当中，却与它所散布到的对象的核心功能毫无关系。对于其他很多类似功能，如事务管理、权限控制等也是如此。这导致了大量代码的重复，而不利于各个模块的重用。
AOP技术则恰恰相反，它利用一种称为"横切"的技术，能够剖解开封装的对象内部，并将那些影响了多个类并且与具体业务无关的公共行为 封装成一个独立的模块（称为切面）。更重要的是，它又能以巧夺天功的妙手将这些剖开的切面复原，不留痕迹的融入核心业务逻辑中。这样，对于日后横切功能的编辑和重用都能够带来极大的方便。
AOP技术的具体实现，无非也就是通过动态代理技术或者是在程序编译期间进行静态的"织入"方式。

再具体的实现方式就不多说了，只要清楚 AOP 作为框架服务的一部分，AOP 是非侵入式的。好比一个故事的主线就是那样了，AOP是另外一条辅助线索，可以先编完主线在去调试辅助线索，辅助线索不会也不应当干涉主线的行为。

###Web框架需要提供的服务###

1. 数据持久化，通常采用的数据库技术、ORM技术、NoSQL技术等
2. 身份认证
3. 权限/用户授权管理，这个要自己实现
4. 日志服务，这个很方便的用 AOP和Log4Net组件等
5. 工作流，我们有了一些使用工作流思想的应用和工作流定义，但没有一个通用的工作流引擎
6. 插件管理，管理部分这个要自己做，IIS平台本身提供此种应用方式，即Web.Config 继承。
7. 可伸缩的多组织部署/管理方式，每个企业/用户组织一个站点的方式很难维护，必须从机制上实现自管理。
   Share Points Fundation 提供了一个很好的评估样本，即模板化站点，通过安装/部署一个站点模板迅速建立增加一个可用的功能模块，即满足了站点的快速发布，又能够在模板的基础上个性化定制，然后把定制版本变成新的模板。虽然实现的方式比较耗费资源，但是这种管理方式似乎和我们想要的不太远了。
传统的方式，发布一个子站点就是把子站点的压缩包展开到 IIS站点对应的目录里，打包成模板自然是把文件目录压缩到一个文件中。
*这种方式在 J2EE框架里面 WAR打包发布早就成为标准了，微软哪，就是微微软了那么一点*。
更优雅的做法，使用URL ReWriter 在Url调度处理过程中把处理流程引入到公共模块中，同时保留增量部分的资源访问。
这种方式没有具体实现，理论上看一定可以的。
8. Web 园（Web Garden）组织


先扯点和项目无关的话题
软件 = 工具 的见解不能算错，后面的真实意思是，用户未必按照我们设计的方式来使用软件，所以工具不能百分百满足全部要求就是可以理解的了。看到用户创造性的使用我们的软件，其实是一件很欣慰的事情，哪怕他在用软件的一个Bug在完成自己的工作。

> Written with [StackEdit](https://stackedit.io/).